<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kúmulo</title>
    <link rel="stylesheet" href="styledash.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="icon" type="image/png" href="moneyinthebank.png">
</head>

<body>
    <div class="grid-container">
        <!-- Ingresos -->
        <div class="card">
            <h2>Ingresos</h2>
            <table id="tablaIngresos">
                <tr>
                    <td></td>
                    <td><strong>Flujo de Efectivo</strong></td>
                </tr>
                <tr>
                    <td>Salario</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="salario" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Intereses / Dividendos</strong></td>
                </tr>
                <tbody id="interesesLista"></tbody>
                <tr>
                    <td colspan="2"><strong>Bienes Raíces / Negocios</strong></td>
                </tr>
                <tbody id="ingresosBR"></tbody>
            </table>
        </div>

        <!-- Resumen -->
        <div class="card resumen-card">
            <div class="mensaje-resumen">
                Aumenta tus ingresos pasivos para escapar de la carrera de la rata.
            </div>
            <div class="progreso-wrapper">
                <div class="resumen-imagen">
                    <img src="moneyinthebank.png" alt="Resumen gráfico">
                </div>
                <div class="progreso-labels">
                    <span>Ingreso Pasivo: <strong id="valorPasivo">$0</strong></span>
                    <span>Total Gastos: <strong id="valorGastos">$0</strong></span>
                </div>
                <div class="barra-contenedor">
                    <div id="barraProgresoVisual" class="barra-progreso"></div>
                </div>
                <div id="estadoCarrera"></div>
            </div>
            <div class="resumen-cuenta">
                <div class="efectivo-container">
                    <span class="efectivo-label">Efectivo</span>
                    <div class="efectivo-right">
                        <i id="editEfectivo" class="fas fa-edit"></i>
                        <span id="resumenEfectivo">$0</span>
                    </div>
                </div>
                <div><span>Total de ingresos</span><span id="resumenIngresos">$0</span></div>
                <div><span>Total de gastos</span><span id="resumenGastos">-$0</span></div>
                <hr />
                <div><span>Día de pago</span><span id="resumenPayday">$0</span></div>
            </div>

            <button id="btnPayday" class="payday-button">Día de Pago</button>
            <!-- Modal -->
            <div id="modalConfirmacion" class="modal-overlay hidden">
                <div class="modal-box">
                    <p>¿Deseas aplicar el Día de Pago?</p>
                    <div class="modal-actions">
                        <button id="confirmarPago">Sí</button>
                        <button id="cancelarPago">No</button>
                    </div>
                </div>
            </div>
            <!-- Modal -->
            <div id="modalGuardar" class="modal-overlay hidden">
                <div class="modal-box">
                    <p>¿Deseas guardar el Estado Financiero?</p>
                    <div class="modal-actions">
                        <button id="confirmarPago2">Sí</button>
                        <button id="cancelarPago2">No</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gastos -->
        <div class="card">
            <h2>Gastos</h2>
            <table id="tablaGastos">
                <tr>
                    <td>Impuestos</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="gastoImpuestos" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Hipoteca de Casa</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="gastoHipoteca" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Préstamo de Auto</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="gastoAuto" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Tarjeta de Crédito</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="gastoTC" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Deuda de Tienda</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="gastoTienda" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Otros Gastos</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="otrosGastos" value="0" />
                        </div>
                    </td>
                </tr>
                <tbody id="gastosExtra"></tbody>
            </table>
        </div>

        <!-- Activos -->
        <div class="card">
            <h2>Activos</h2>
            <table>
                <tr>
                    <td><strong>Acciones / Fondos / CDs</strong></td>
                    <td><strong>Costo por Acción</strong></td>
                </tr>
                <tbody id="accionesLista"></tbody>
            </table>
            <table>
                <tr>
                    <td><strong>Bienes Raíces / Negocios</strong></td>
                    <td><strong>Costo</strong></td>
                </tr>
                <tbody id="activosBR"></tbody>
            </table>
        </div>

        <!-- Pasivos -->
        <div class="card">
            <h2>Pasivos</h2>
            <table>
                <tr>
                    <td>Hipoteca de Casa</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="pasivoHipoteca" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Préstamos de Auto</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="pasivoAuto" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Tarjetas de Crédito</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="pasivoTC" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Deuda de Tienda</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" id="pasivoTienda" value="0" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Otro Préstamo</td>
                    <td>
                        <div class="input-con-simbolo">
                            <span class="simbolo">$</span>
                            <input type="number" value="0" />
                        </div>
                    </td>
                </tr>
                <tbody id="otrosPasivos"></tbody>
                <tr>
                    <td><strong>Bienes Raíces / Negocios</strong></td>
                    <td><strong>Deuda</strong></td>
                </tr>
                <tbody id="pasivosBR"></tbody>
            </table>
        </div>
    </div>

    <!-- Menú flotante -->
    <div class="menu-flotante">
        <button id="btnGuardar" title="Guardar">
            <i class="fas fa-save"></i>
        </button>
        <button id="btnActualizar" title="Actualizar">
            <i class="fas fa-sync-alt"></i>
        </button>
        <button id="logoutBtn" title="Cerrar sesión">
            <i class="fas fa-sign-out-alt"></i>
        </button>

    </div>

    <script type="module" src="firebase.js"></script>
    <script type="module" src="script.js"></script>
    <script type="module">
        import { auth } from "./firebase.js";
        import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

        // Verificar sesión
        onAuthStateChanged(auth, (user) => {
            if (!user) {
                // No hay sesión → redirigir al login
                window.location.href = "index.html";
            } else {
                console.log("Usuario autenticado:", user.email);
            }
        });

        // Ejemplo: botón de logout
        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
            logoutBtn.addEventListener("click", async () => {
                await signOut(auth);
                window.location.href = "index.html";
            });
        }
    </script>
</body>


</html>

